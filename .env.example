# ═══════════════════════════════════════════════════════════════════════════
# Loan Avengers - Provider-Agnostic AI Configuration
# ═══════════════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in your actual values

# ===============================================================================
# DEVELOPMENT ENVIRONMENT
# ===============================================================================

# Python PATH - Add project root to Python path
PYTHONPATH="${PYTHONPATH}:${PWD}"

# ═══════════════════════════════════════════════════════════════════════════
# AZURE AI FOUNDRY CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
# Azure AI Foundry project endpoint (from Azure Portal)
AZURE_AI_PROJECT_ENDPOINT=https://your-project.projects.ai.azure.com

# Model deployment name (configured in Foundry portal)
# This can point to ANY provider: Azure OpenAI, OpenAI, Anthropic, etc.
AZURE_AI_MODEL_DEPLOYMENT_NAME=gpt-4

# Optional: Default agent name
AZURE_AI_AGENT_NAME=loan-avengers-agent

# ═══════════════════════════════════════════════════════════════════════════
# AZURE AUTHENTICATION - Microsoft Entra ID (Automatic)
# ═══════════════════════════════════════════════════════════════════════════
# This application uses DefaultAzureCredential for automatic authentication.
# NO CONFIGURATION NEEDED - works everywhere with zero setup!
#
# How it works:
#   Local Development  → Uses `az login` (your user account)
#   Azure Production   → Uses managed identity (automatic)
#   CI/CD Pipelines    → Uses service principal (via env vars below)
#
# For CI/CD only - set these environment variables:
#   AZURE_TENANT_ID=your-tenant-id
#   AZURE_CLIENT_ID=your-client-id
#   AZURE_CLIENT_SECRET=your-client-secret
#
# ───────────────────────────────────────────────────────────────────────────
# ===============================================================================
# MCP SERVERS CONFIGURATION
# ===============================================================================

# MCP Server Host Configuration
# - Development: localhost or 0.0.0.0
# - Azure Container Apps: Internal service DNS names
MCP_SERVER_HOST=0.0.0.0

# MCP Transport Protocol
# Options: streamable-http (recommended), sse, stdio
MCP_TRANSPORT=streamable-http

# MCP Server Ports
MCP_APPLICATION_VERIFICATION_PORT=8010
MCP_DOCUMENT_PROCESSING_PORT=8011
MCP_FINANCIAL_CALCULATIONS_PORT=8012

# MCP Server URLs (for API to connect to MCP servers)
# Development: Use localhost
# Azure: Use internal Container Apps DNS (e.g., http://mcp-app-verification.internal.azurecontainerapps.io/mcp)
MCP_APPLICATION_VERIFICATION_URL=http://localhost:8010/mcp
MCP_DOCUMENT_PROCESSING_URL=http://localhost:8011/mcp
MCP_FINANCIAL_CALCULATIONS_URL=http://localhost:8012/mcp

# MCP Connection Settings
MCP_CONNECTION_TIMEOUT=30


# ═══════════════════════════════════════════════════════════════════════════
# OBSERVABILITY CONFIGURATION (OpenTelemetry + Azure Application Insights)
# ═══════════════════════════════════════════════════════════════════════════
LOG_LEVEL=INFO

# Enable OpenTelemetry framework-wide (agent_framework observability)
# Set to true to enable distributed tracing across all components
ENABLE_OTEL=true

# Application Insights (optional - leave empty for stdio logging only)
# Get this from: Azure Portal → Application Insights → Properties → Connection String
APPLICATIONINSIGHTS_CONNECTION_STRING=

# OpenTelemetry Service Configuration
OTEL_SERVICE_NAME=loan-avengers-api
OTEL_SERVICE_VERSION=0.1.0
OTEL_RESOURCE_ATTRIBUTES=deployment.environment=development,cloud.provider=azure

# Exclude endpoints from tracing (reduces noise and improves performance)
OTEL_PYTHON_FASTAPI_EXCLUDED_URLS=/health,/docs,/redoc,/openapi.json

# Enable sensitive data in telemetry (for debugging only - NEVER in production!)
ENABLE_SENSITIVE_DATA=false

# ═══════════════════════════════════════════════════════════════════════════
# FASTAPI API SERVER CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════

# API Server Metadata
APP_TITLE="Loan Avengers API"
APP_DESCRIPTION="Multi-agent loan processing system"
APP_VERSION="1.0.0"
APP_DEBUG=false

# CORS Settings - Controls which origins can access the API
# For production: Set to your actual domain(s)
# For local development: Comma-separated list of localhost ports
APP_CORS_ORIGINS="http://localhost:5173,http://localhost:5174,http://localhost:5175,http://localhost:3000"
APP_CORS_ALLOW_CREDENTIALS=true
# APP_CORS_ALLOW_METHODS defaults to ["*"] (all methods)
# APP_CORS_ALLOW_HEADERS defaults to ["*"] (all headers)

# Session Management
APP_SESSION_TIMEOUT_HOURS=24
APP_SESSION_CLEANUP_INTERVAL_HOURS=6

# Logging (overrides LOG_LEVEL above if set)
# APP_LOG_LEVEL=INFO
# APP_ENABLE_OBSERVABILITY=true

# ───────────────────────────────────────────────────────────────────────────
# AZURE DEPLOYMENT SETTINGS (for App Service / Container Apps)
# ───────────────────────────────────────────────────────────────────────────
# For production deployment in Azure:
# 1. Set APP_CORS_ORIGINS to your production domain
# 2. Configure Managed Identity with access to AI Foundry/OpenAI
# 3. Set Application Insights connection string
# 4. Set APP_DEBUG=false
#
# Example production settings:
# APP_CORS_ORIGINS=https://loanavengers.azurewebsites.net,https://www.loanavengers.com
# APP_DEBUG=false
# APP_LOG_LEVEL=WARNING
